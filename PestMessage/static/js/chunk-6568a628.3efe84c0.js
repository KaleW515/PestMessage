(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6568a628"],{"3e0d":function(t,e,a){"use strict";var s=a("f906"),n=a.n(s);n.a},7852:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",{attrs:{id:"header"}},[t._v("个人信息")]),a("el-main",[a("div",{attrs:{id:"myMessage"}},[a("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.imageUrl}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v(" 加载中"),a("span",{staticClass:"dot"},[t._v("...")])])]),a("el-divider"),a("div",{staticClass:"block"},[t.isVolunteer?a("el-avatar",{attrs:{size:15,src:t.volunteerLogoUrl}}):t._e(),a("el-divider")],1),a("span",{domProps:{textContent:t._s("签名: "+t.signature)}}),a("el-divider"),a("span",{domProps:{textContent:t._s("姓名: "+t.name)}}),a("el-divider"),a("span",{domProps:{textContent:t._s("留言数: "+t.MessageNum)}}),a("el-divider"),a("span",{domProps:{textContent:t._s("收到的赞: "+t.likeNum)}}),a("el-divider"),a("span",{domProps:{textContent:t._s("收到的踩: "+t.disLikeNum)}}),a("el-divider"),a("el-badge",{staticClass:"item",attrs:{value:t.newReplyNum,max:99}},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.openMyMessageReply()}}},[t._v("他的留言")])],1),t._l(t.message,(function(e){return t.myMessageIsShow?a("div",{key:e,staticClass:"text item"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{"padding-bottom":"50px",position:"relative"},attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"block"},[a("el-avatar",{staticClass:"myAva",attrs:{size:50,src:e.avaUrl}})],1),a("span",{staticClass:"msgTitle",domProps:{textContent:t._s(e.name+" "+e.date)}}),a("el-link",{on:{click:function(a){return t.watchOldReply(e)}}},[t._v(" 查看回复"),a("i",{staticClass:"el-icon-view el-icon--right"})]),a("i",{staticClass:"el-icon-top"}),a("span",{staticClass:"likeNum",domProps:{textContent:t._s(e.likenum)}}),a("i",{staticClass:"el-icon-bottom"}),a("span",{staticClass:"disLikeNum",domProps:{textContent:t._s(e.dislikenum)}})],1),a("div",[a("span",{domProps:{textContent:t._s(e.content)}}),e.replyIsShow?a("div",{staticClass:"reply-box"},[a("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"}},t._l(e.reply,(function(e){return a("li",{staticClass:"infinite-list-item"},[a("div",{staticClass:"block"},[a("el-avatar",{staticClass:"myAva",attrs:{size:30,src:e.avaUrl}})],1),a("span",{staticClass:"reply-box-name",domProps:{textContent:t._s(e.from_name)}}),a("span",{staticClass:"reply-box-content",domProps:{textContent:t._s(": "+e.content+"       ("+e.date+")")}}),e.from_name===t.myName?a("el-link",{attrs:{type:"primary",underline:!1},domProps:{textContent:t._s("   删除")},on:{click:function(a){return t.delMyReply(e)}}}):t._e()],1)})),0)]):t._e()])])],1):t._e()})),t.myMessageIsShow?a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next, jumper","current-page":t.currentPage,total:t.total,"page-size":"5"},on:{"current-change":t.handleCurrentChange}}):t._e()],2)])],1)],1)},n=[],i=(a("b0c0"),{name:"OtherPeople",data:function(){return{myName:"",name:"",imageUrl:axios.defaults.baseURL+"/getOtherAva",signature:"",MessageNum:0,likeNum:0,disLikeNum:0,newReplyNum:"",total:0,currentPage:0,volunteerLogoUrl:axios.defaults.baseURL+"/VolLogo",myMessageIsShow:!1,isVolunteer:!1,message:[]}},methods:{watchOldReply:function(t){t.replyIsShow=!t.replyIsShow;var e=this,a=new FormData;a.append("commentsId",t.id),this.axios({method:"post",url:"/watchReply",data:a}).then((function(a){"没有回复"===a.data.msg?e.$message("没有回复"):t.reply=a.data}),(function(t){console.log(t)}))},handleCurrentChange:function(t){this.currentPage=t;var e=this,a=new FormData;a.append("currentPage",e.currentPage),this.axios({method:"post",url:"/watchMyReply",data:a}).then((function(t){"成功"===t.data.msg?(e.message=t.data.pageNow,e.total=5*parseInt(t.data.pageCount)):e.$message.error(t.data.msg)}),(function(t){console.log(t)}))},openMyMessageReply:function(){this.myMessageIsShow=!this.myMessageIsShow;var t=this;this.axios({method:"get",url:"/watchMyReply?phoneNumber="+this.$route.query.phoneNumber}).then((function(e){t.message=e.data.pageNow,t.total=5*parseInt(e.data.pageCount)}),(function(t){console.log(t)}))},init:function(){var t=this;this.imageUrl=axios.defaults.baseURL+"/getOtherAva?username="+this.$route.query.username,this.axios({method:"get",url:"/getOtherInfo?phoneNumber="+this.$route.query.phoneNumber}).then((function(e){t.myName=e.data.data.myName,t.name=e.data.data.name,t.phoneNumber=e.data.data.phoneNumber,t.MessageNum=e.data.data.commentsNum,t.likeNum=e.data.data.likeNum,t.disLikeNum=e.data.data.disLikeNum,t.signature=e.data.data.signature,"1"===e.data.data.isVolunteer?t.isVolunteer=!0:t.isVolunteer=!1}),(function(t){console.log(t)}))},delMyReply:function(t){var e=this;this.$confirm("此操作将永久删除该回复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios({methods:"get",url:"/delMyReply?id="+t.id}).then((function(t){"成功"===t.data.msg&&e.$message({type:"success",message:"删除成功!"})}),(function(t){console.log(t)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}},mounted:function(){this.init()}}),o=i,r=(a("3e0d"),a("2877")),l=Object(r["a"])(o,s,n,!1,null,"555380a6",null);e["default"]=l.exports},b0c0:function(t,e,a){var s=a("83ab"),n=a("9bf2").f,i=Function.prototype,o=i.toString,r=/^\s*function ([^ (]*)/,l="name";!s||l in i||n(i,l,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(t){return""}}})},f906:function(t,e,a){}}]);